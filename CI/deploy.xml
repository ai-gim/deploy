<project name="gim-deploy-deploy" default="build" basedir="..">
	
	<property name="USER" value="root"></property>
	<property name="PASSWD" value="123456"></property>
	<property name="HOST" value="172.16.102.122"></property>
	
	<target name="deploy">
		<scp todir="${USER}:${PASSWD}@${HOST}:/usr/local/lib/gim" trust="true">
			<fileset dir="temp">
				<include name="deploy.zip"/>
			</fileset>
		</scp>
		<sshexec host="${HOST}" username="${USER}"  password="${PASSWD}" trust="true" command="
			cd /usr/local/lib/gim;
			rm -rf deploy;
			unzip deploy.zip;
			rm -rf deploy.zip;
			cd deploy/bin;
			chmod 755 *;
			./gim-deploy stop;
			./gim-deploy start;
			"/>
	</target>
	
	<target name="build">
		<antcall target="deploy"></antcall>
	</target>
</project>